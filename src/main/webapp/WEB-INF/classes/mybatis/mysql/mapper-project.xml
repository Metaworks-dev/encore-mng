<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="project">

	<select id="getProjList" parameterType="hashmap" resultType="hashmap">
		SELECT /* project.getProjList */
		PROJ_ID, PROJ_NO, EMAIL, PASSWD, PROJ_NM, MNG_LVL, ENT_DT, REG_DTM, MOD_DTM
		FROM TB_PROJ
		WHERE 1 = 1
		<if test="PROJ_ID != null">
			AND PROJ_ID = #{PROJ_ID}
		</if>
		<if test="PROJ_NM != null">
			AND PROJ_NM LIKE CONCAT('%', #{PROJ_NM}, '%')
		</if>
		<if test="EMAIL != null">
			AND EMAIL = #{EMAIL}
			AND PASSWD = #{PASSWD}
		</if>
		ORDER BY PROJ_ID DESC
		<if test="start != null">
			limit #{start}, #{limit}
		</if>
	</select>

	<select id="getProjListCnt" parameterType="hashmap" resultType="int">
		SELECT /* project.getProjListCnt */
		COUNT(*)
		FROM TB_PROJ
		WHERE 1 = 1
		<if test="PROJ_ID != null">
			AND PROJ_ID = #{PROJ_ID}
		</if>
		<if test="EMAIL != null">
			AND EMAIL = #{EMAIL}
			AND PASSWD = #{PASSWD}
		</if>
	</select>

	<insert id="insertProj" parameterType="hashmap">
		INSERT /* project.insertProj */
		INTO TB_PROJ
			(PROJ_NO, EMAIL, PASSWD, PROJ_NM, MNG_LVL, ENT_DT, REG_DTM, MOD_DTM)
		VALUES
		(#{PROJ_NO}, #{EMAIL}, #{PASSWD}, #{PROJ_NM}, #{MNG_LVL}, #{ENT_DT}, NOW(), NOW())
	</insert>

	<update id="updateProj" parameterType="hashmap">
		UPDATE /* project.updateProj */
			TB_PROJ
		SET EMAIL = IFNULL(#{EMAIL}, EMAIL)
		  ,PASSWD = IFNULL(#{PASSWD}, PASSWD)
		  ,PROJ_NM = IFNULL(#{PROJ_NM}, PROJ_NM)
		  ,PROJ_NO = IFNULL(#{PROJ_NO}, PROJ_NO)
		  ,MNG_LVL = IFNULL(#{MNG_LVL}, MNG_LVL)
		  ,ENT_DT = IFNULL(#{ENT_DT}, ENT_DT)
		  ,MOD_DTM = NOW()
		WHERE 1 = 1
		  AND PROJ_ID = #{PROJ_ID}
	</update>

	<delete id="deleteProj" parameterType="hashmap">
		DELETE /* project.deleteProj */
		TB_PROJ
		 WHERE 1 = 1
		   AND PROJ_ID = #{PROJ_ID}
	</delete>
</mapper>


